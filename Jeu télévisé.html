<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Lecteur audio simple</title>
<style>
body { font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; padding: 2rem; background:#f7f7fb; color:#111 }
.card{ max-width:520px; margin:0 auto; background:white; padding:1.25rem; border-radius:12px; box-shadow:0 6px 18px rgba(20,20,50,0.08) }
button{ padding:0.6rem 1rem; font-size:1rem; border-radius:8px; border:0; cursor:pointer }
#playBtn{ background:#0066ff; color:white }
#pauseBtn{ background:#e0e0e0; color:#111; margin-left:0.5rem }
input[type=file]{ display:block; margin-top:0.75rem }
.progress{ height:8px; background:#eee; border-radius:8px; overflow:hidden; margin-top:0.75rem }
.progress > i{ display:block; height:100%; width:0%; background:#0066ff }
.meta{ margin-top:0.5rem; font-size:0.9rem; color:#444 }
</style>
</head>
<body>
<div class="card">
<h2>Lecteur audio multi‑pistes</h2>
<p>Cliquez sur un bouton pour lire une piste différente provenant de votre dépôt GitHub.</p>


<audio id="audio" preload="metadata"></audio>


<div class="tracks" style="margin-top:1rem; display:flex; flex-direction:column; gap:0.5rem">
<button class="track" data-src="https://raw.githubusercontent.com/USER/REPO/main/piste1.mp3">Piste 1</button>
<button class="track" data-src="https://raw.githubusercontent.com/USER/REPO/main/piste2.mp3">Piste 2</button>
<button class="track" data-src="https://raw.githubusercontent.com/USER/REPO/main/piste3.mp3">Piste 3</button>
</div>


<div class="progress" aria-hidden="true" title="Barre de progression">
<i id="bar"></i>
</div>


<div class="meta">
<span id="time">00:00 / 00:00</span>
<div id="filename"></div>
</div>
</div>


<script>
const audio = document.getElementById('audio');
const bar = document.getElementById('bar');
const timeLabel = document.getElementById('time');
const filename = document.getElementById('filename');


function formatTime(s){
if (isNaN(s) || s === Infinity) return '00:00';
const m = Math.floor(s/60).toString().padStart(2,'0');
const sec = Math.floor(s%60).toString().padStart(2,'0');
return `${m}:${sec}`;
}


// Lecture d'une piste GitHub sur clic
document.querySelectorAll('.track').forEach(btn => {
btn.addEventListener('click', () => {
const url = btn.dataset.src;
audio.src = url;
filename.textContent = `Lecture : ${btn.textContent}`;
audio.load();
audio.play();
});
});


audio.addEventListener('timeupdate', () => {
const pct = (audio.currentTime / audio.duration) * 100 || 0;
bar.style.width = pct + '%';
timeLabel.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
});


audio.addEventListener('loadedmetadata', () => {
timeLabel.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
});


document.querySelector('.progress').addEventListener('click', (e) => {
const rect = e.currentTarget.getBoundingClientRect();
const x = e.clientX - rect.left;
const pct = x / rect.width;
if (!isNaN(audio.duration)) audio.currentTime = pct * audio.duration;
});
</script>
</body>
</html>
